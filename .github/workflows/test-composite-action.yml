name: Test Composite Action

on:
  workflow_dispatch:
    inputs:
      user_name:
        description: 'Nombre para el saludo'
        required: false
        default: 'Desarrollador'

jobs:
  test-action:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Usar nuestra composite action
      id: greet-action
      uses: ./.github/actions/greet-and-info
      with:
        name: ${{ github.event.inputs.user_name || 'GitHub Actions User' }}
        emoji: '🚀'

    - name: Mostrar outputs de la action
      run: |
        echo "📋 Outputs de la action:"
        echo "  • Mensaje: ${{ steps.greet-action.outputs.greeting-message }}"
        echo "  • Info Repo: ${{ steps.greet-action.outputs.repo-info }}"

    - name: Prueba con diferentes parámetros
      uses: ./.github/actions/greet-and-info
      with:
        name: 'Daniel'
        emoji: '👨‍💻'
