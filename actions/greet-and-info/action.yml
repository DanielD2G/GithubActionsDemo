name: 'Greet and Show Repo Info'
description: 'Saluda personalizadamente y muestra informaciÃ³n bÃ¡sica del repositorio'
author: 'Daniel'

inputs:
  name:
    description: 'Nombre de la persona a saludar'
    required: true
    default: 'Usuario'
  emoji:
    description: 'Emoji para el saludo'
    required: false
    default: 'ğŸ‘‹'

outputs:
  greeting-message:
    description: 'El mensaje de saludo generado'
    value: ${{ steps.greet.outputs.message }}
  repo-info:
    description: 'InformaciÃ³n del repositorio'
    value: ${{ steps.info.outputs.repo-data }}

runs:
  using: 'composite'
  steps:
    - name: Saludar
      id: greet
      shell: bash
      run: |
        echo "::notice::${{ inputs.emoji }} Â¡Hola ${{ inputs.name }}!"
        echo "message=${{ inputs.emoji }} Â¡Hola ${{ inputs.name }}!" >> $GITHUB_OUTPUT
        echo ""
        echo "==================================="
        echo "${{ inputs.emoji }} Bienvenido a GitHub Actions"
        echo "==================================="
        echo ""

    - name: Mostrar informaciÃ³n del repositorio
      id: info
      shell: bash
      run: |
        echo "ğŸ“¦ InformaciÃ³n del Repositorio:"
        echo "  â€¢ Repositorio: ${{ github.repository }}"
        echo "  â€¢ Branch: ${{ github.ref_name }}"
        echo "  â€¢ Commit SHA: ${{ github.sha }}"
        echo "  â€¢ Actor: ${{ github.actor }}"
        echo "  â€¢ Workflow: ${{ github.workflow }}"
        echo ""

        # Guardar informaciÃ³n en output
        REPO_DATA="Repo: ${{ github.repository }}, Branch: ${{ github.ref_name }}"
        echo "repo-data=$REPO_DATA" >> $GITHUB_OUTPUT

    - name: Mostrar fecha y hora
      shell: bash
      run: |
        echo "ğŸ• Fecha y hora de ejecuciÃ³n:"
        echo "  â€¢ $(date '+%Y-%m-%d %H:%M:%S %Z')"
        echo ""
        echo "âœ… Action ejecutada exitosamente"
